<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/img/apple-touch.png">
    <meta name="theme-color" content="#764ABC"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <!-- <script>
      // Registering our Service worker
      if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('serviceworker.js', { scope: './' })
      }
    </script> -->
    <script>
      if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('serviceworker.js').then(function(registration) {
          console.log('Service worker registered successfully', registration);
        }).catch(function(err) {
          console.log('Service worker registration failed: ', err);
        });
      };
    </script>

    <title>Hello, world!</title>
  </head>
  <body>
    <h1>Ingredients</h1>

    <div id="scanframe">

      <ul class="list-group list-group-flush">
        <li class="list-group-item" v-for="ingredient in ingredients">${ingredient}</li>
      </ul>

      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary" v-on:click="startScan" data-toggle="modal" data-target="#exampleModal">
        Scan
      </button>

      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <video v-if="scan" id="video" width="300" height="200" style="border: 1px solid gray"></video>
              <label>Result:</label>
              <pre><code id="result"></code></pre>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" v-on:click="resetScan" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" v-on:click="saveScan" data-dismiss="modal">Save changes</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary" v-on:click="" data-toggle="modal" data-target="#inputModal">
        Input
      </button>

      <!-- Modal -->
      <div class="modal fade" id="inputModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="input-group">
                <!-- <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">@</span>
                </div> -->
                <input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon1" disabled>
              </div>
              
              <div class="input-group">
                <input type="text" id="input_ingredient" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="basic-addon2">
                <!-- <div class="input-group-append">
                  <span class="input-group-text" id="basic-addon2">@example.com</span>
                </div> -->
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" v-on:click="" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" v-on:click="addIngredient" data-dismiss="modal">Save changes</button>
            </div>
          </div>
        </div>
      </div>

      <button type="button" class="btn btn-primary" v-on:click="findRecipes">
        Search for recipes
      </button>

      <ul class="list-group list-group-flush">
        <li class="list-group-item" v-for="recipe in recipes">${recipe.title}</li>
      </ul>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    
    <script type="text/javascript" src="https://unpkg.com/@zxing/library@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- <script src="/js/pwa.js"></script> -->
    <script src='/js/search.js' type='text/javascript'></script>

  </body>
</html>